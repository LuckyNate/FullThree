<!DOCTYPE html>
<html>
<head>
    <title>three.js webgl - hello three.js</title>
    <meta charset="utf-8">
    <style>
    body {
        background-color: #ffffff;
        margin: 0;
        overflow: hidden;
    }
    </style>
    <script src="../FullThree//node_modules/three/build/three.min.js"></script>
    <script>
    
    const k = 1000;
    var camera, scene, renderer;
    var geometry, material, loader;
    var clock;
    var dir=1;

    //temp variable toggle for the camera tracking
    var toggle = 1;


        function init() {
            renderer = new THREE.WebGLRenderer();
            renderer.setClearColor(0xffffff,1);
            renderer.setSize( window.innerWidth, window.innerHeight );
            document.body.appendChild( renderer.domElement );

            scene = new THREE.Scene();

            const light = new THREE.AmbientLight( 0x909090); // soft white light
            scene.add( light );

            geometry = new THREE.CylinderGeometry( 1.2*k, 1*k, 1*k, 1*k);
            material = new THREE.MeshStandardMaterial( {color: 0x2c7db6, side: THREE.DoubleSide} );
            waterbox = new THREE.Mesh( geometry, material );
            waterbox.translateY(-0.5*k);
            scene.add( waterbox);

            geometry = new THREE.BoxGeometry( 0.5, 2, 0.5 );
            material = new THREE.MeshStandardMaterial( {color: 0x00ff00, side: THREE.FrontSide} );
            player= new THREE.Mesh( geometry, material );
            player.translateY(1);
            scene.add( player );

            geometry = new THREE.SphereGeometry( Math.PI*k, 1*k, 1*k);
            loader = new THREE.TextureLoader();
            material = new THREE.MeshBasicMaterial({color: 0xffffff, side: THREE.BackSide, map: loader.load('https://raw.githubusercontent.com/LuckyNate/FullThree/main/images/seascape.png')});
            skybox = new THREE.Mesh(geometry, material); 
            
            camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, Math.PI * 2 * k);
            camera.position.set ( player.position.x-4, 2, player.position.z-3);
            camera.lookAt(player.position);
            

            skybox.translateY(2.9275*k);
            scene.add( skybox);

            clock = new THREE.Clock();

            window.addEventListener( 'resize', onWindowResize, false );

            window.addEventListener('wheel', function(){
                var e = event;
                if(e.deltaY < 0){
                    camera.position.distanceTo(player.position ) > 2
                        ? camera.translateZ(-1)
                        : camera.translateZ(0);
                }
                else {
                    camera.position.distanceTo( player.position ) < 1000
                        ? camera.translateZ(+1)
                        : camera.translateZ(0);
                }
                camera.lookAt(player.position);
            }, false);

        }

        function animate() {
            requestAnimationFrame( animate );
            var delta =  clock.getDelta();
    
            camera.rotation.y += delta * 0;
       
            renderer.render( scene, camera );
        }

        function onWindowResize() {

                windowHalfX = window.innerWidth / 2;
                windowHalfY = window.innerHeight / 2;

                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth, window.innerHeight );

        }
        
        window.addEventListener("DOMContentLoaded", function(event) {
            init();
            animate();
        });
        
    </script>
</head>
<body>

</body>
</html>